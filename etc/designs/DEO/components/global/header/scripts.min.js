!function(e){function t(){function t(){function t(){T.removeAttr("style"),T.css("left",a)}function n(e){V=window[sitename].VARS.IS_VIEWTYPE;var n={};if("mobile"==V)n.top=e?A.height()-T.height():A.height();else{var o="tablet"==V?180:220;n.width=e?0:o,n.left=a||A.offset().left,e||T.css("width","0")}return n.ease=Expo.easeOut,e&&(n.onComplete=t),n}function o(t){var n=e(t.target),o=n.parent();o.hasClass("allmenu-btn-open")||o.hasClass("allmenu-btn-close")||n.hasClass("header-search-inputbox")||n.hasClass("header-search-open")||o.hasClass("header-search-open")||n.hasClass("header-search-submit")||c.closeEffect()}function s(){a=A.offset().left,"mobile"==V?T.css("left","0"):T.css("left",a)}function i(){A.on("keydown",l.openBtn),H.on("keydown",l.submitBtn),S.on("keydown",l.inputBack),e("body").on("touchend",".wrapper",c.closeEffect)}var a,c=this;this.openEffect=function(){s(),S.val(""),A.addClass("active"),T.addClass("active");var t=n();T.css("display","block"),TweenMax.killTweensOf(T),TweenMax.to(T,.5,t),e(document).on("click",o)},this.closeEffect=function(){var t=n(!0);A.removeClass("active"),T.removeClass("active"),TweenMax.killTweensOf(T),TweenMax.to(T,.5,t),e(document).off("click",o)},this.resizeSet=function(){T.removeClass("active"),A.removeClass("active"),T.removeAttr("style"),A.removeAttr("style")};var l={openBtn:function(e){e.shiftKey&&9==e.keyCode||9==e.keyCode&&(e.preventDefault(),c.openEffect(),S.focus()),13==e.keyCode&&(e.preventDefault(),c.openEffect(),S.focus())},submitBtn:function(e){e.shiftKey&&9==e.keyCode||9==e.keyCode&&c.closeEffect()},inputBack:function(e){e.shiftKey&&9==e.keyCode?c.closeEffect():9==e.keyCode}};this.init=function(){i()}}function n(){function t(e){h=parseInt(document.body.scrollHeight-(document.body.scrollHeight-window.innerHeight))}function n(e){e.css({display:"block",height:"0"});var t=e.find("ul").height();TweenMax.to(e,.5,{height:t,ease:Expo.easeOut})}function o(e,t){t.removeAttr("style"),e.removeClass("active")}function s(e){var t=e.next();TweenMax.killTweensOf(t),TweenMax.to(t,.5,{height:0,ease:Expo.easeOut,onComplete:o,onCompleteParams:[e,t]})}function i(t,o){"focus"!=t.type&&"mobile"!=window[sitename].VARS.IS_VIEWTYPE&&t.preventDefault();var i="keydown"!=t.type?e(this):o,a=i.next();i.hasClass("active")?s(i):(i.addClass("active"),I.each(function(){var t=e(this);t.hasClass("active")&&s(t)}),n(a)),l=i}function a(t){if("mobile"==window[sitename].VARS.IS_VIEWTYPE){var n=e(this),o=t.keyCode||t.which;9==o&&(t.shiftKey||i(t,n))}}function c(){"mobile"==V?(I.off("click",i),I.on("click",i),I.off("keydown",a),I.on("keydown",a)):I.off("click",i)}var l;this.menuOpen=function(){h=parseInt(document.body.scrollHeight-(document.body.scrollHeight-window.innerHeight)),"mobile"==V&&(k.css({left:-w.width(),height:h-C.height()}),TweenMax.to(k,.5,{left:0,ease:Expo.easeOut,onComplete:t}),w.css("overflow","hidden")),b.addClass("active"),E.css("display","block"),g.css("display","none")},this.menuClose=function(){"mobile"==V&&(k.removeAttr("style"),w.removeAttr("style")),b.removeClass("active"),g.css("display","block"),E.css("display","none")},this.resizeSet=function(){c(),x.removeAttr("style"),I.removeClass("active")},this.init=function(){c()}}function o(){V=window[sitename].VARS.IS_VIEWTYPE,b.hasClass("active")?(h=parseInt(document.body.scrollHeight-(document.body.scrollHeight-window.innerHeight)),"mobile"==V?(w.css("overflow","hidden"),k.css("height",h-C.height())):(w.removeAttr("style"),k.removeAttr("style"))):(w.removeAttr("style"),k.removeAttr("style")),V!=u&&(d.resizeSet(),m.resizeSet(),u=V)}function s(){var t=e(this);t.hasClass("active")?d.closeEffect():(d.openEffect(),m.menuClose())}function i(){w.removeClass("minisize"),m.menuOpen(),E.focus(),b.hasClass("active")&&(e(document).off("click"),"mobile"==V||T.hasClass("active")||(d.openEffect(),e(document).off("click"))),"mobile"==V&&d.closeEffect()}function a(){b.hasClass("active")&&(0!=p.scrollTop()?w.addClass("minisize"):w.removeClass("minisize"),m.menuClose(),g.focus(),"mobile"!=V&&d.closeEffect())}function c(){if(0!=p.scrollTop()){if(b.hasClass("active"))return;w.addClass("minisize")}else w.removeClass("minisize")}function l(){var t=e(".main-cat-submenu"),n=t.length;n>0&&t.trigger("mouseleave")}function f(){C.on("mouseover",l),A.on("click",s),g.on("click",i),E.on("click",a),g.on({keydown:function(t){if(t.target==this){var n=t.keyCode||t.which;9==n&&(t.shiftKey||(i(),t.preventDefault(),e(v).focus()))}}}),e(v).on({keydown:function(e){if(e.target==this){var t=e.keyCode||e.which;9==t&&e.shiftKey&&(a(),e.preventDefault(),g.focus())}}}),e(y).on({keydown:function(e){var t=e.keyCode||e.which;9==t&&(e.shiftKey||a())}}),p.on("resize",o),p.on("scroll",c)}function r(){V=window[sitename].VARS.IS_VIEWTYPE,h=parseInt(document.body.scrollHeight-(document.body.scrollHeight-window.innerHeight)),f()}var h,u,d,m,v,y,p=e(window),w=(e("html"),e("body")),C=e(".header-container"),b=e(".allmenu-container"),k=e(".allmenu-wrap"),g=e(".allmenu-btn-open"),E=e(".allmenu-btn-close"),A=e(".header-search-open"),T=e(".header-search-wrap"),I=e(".dep1lnk"),x=e(".submenu"),S=T.find("input"),H=T.find(".header-search-submit"),V=window[sitename].VARS.IS_VIEWTYPE,z=[];k.find("*").each(function(e,t){t.tagName.match(/^A$|AREA|INPUT|TEXTAREA|SELECT|BUTTON/gim)&&-1!==parseInt(t.getAttribute("tabIndex"))&&z.push(t),null!==t.getAttribute("tabIndex")&&parseInt(t.getAttribute("tabIndex"))>=0&&32768!==t.getAttribute("tabIndex",2)&&z.push(t)}),v=z[0],y=z[z.length-1],d=new t,d.init(),m=new n,m.init(),r(),c()}e(document).on("ready",t)}(jQuery);